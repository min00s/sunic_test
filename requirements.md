# [REQ-23] 상품 구매 기능 개선
> 작성자: 홍길동 · 버전: v1.0 · 날짜: 2025-08-05

## 개요
장바구니에 담긴 상품을 **즉시 구매**할 수 있도록 checkout 로직을 개선한다.

## 비즈니스 규칙
- AC-1) 구매 요청 시 **장바구니 수량**이 먼저 차감돼야 한다.
- AC-2) 그다음 **상품 재고**를 차감한다.  
- AC-3) 두 단계는 **동일 트랜잭션**으로 처리하여 불일치가 발생하지 않아야 한다.
- AC-4) 재고 부족이면 장바구니 수량 복구 후 `"재고 부족"` 메시지를 반환한다.

## 비고
- API: `POST /checkout`
- 영향 모듈: CartService, ProductService, TransactionManager
